---
const BASE_URL_LOGOS = 'https://kings-league-api.carlos-betan-42.workers.dev/static/logos';

const response = await fetch('https://kings-league-api.carlos-betan-42.workers.dev/leaderboard');
const leaderboard = await response.json();
---

<div class='relative overflow-x-auto shadow-md sm:rounded-lg'>
  <table class='w-full text-left text-black'>
    <thead class='font-black text-xs text-white uppercase bg-black'>
      <tr>
        <th scope='col' class='px-6 py-3'> Posici√≥n</th>
        <th scope='col' class='px-6 py-3'> Equipo</th>
        <th scope='col' class='px-6 py-3'> V</th>
        <th scope='col' class='px-6 py-3'> D</th>
      </tr>
    </thead>
    <tbody>
      {
        leaderboard.map((info) => {
          const { wins, losses, team, rank } = info;
          const { image, name, id } = team;

          return (
            <tr class='bg-white border-b'>
              <th scope='row' class='px-6 py-4 font-black text-black whitespace-nowrap'>
                {rank}
              </th>
              <td class='px-6 py-4 font-black'>
                <a class='flex items-center gap-x-4' href={`/team/${id}`}>
                  <img src={`${BASE_URL_LOGOS}${image}`} alt={`Logo de ${name}`} class='w-6 h-6' />
                  {name}
                </a>
              </td>
              <td class='px-6 py-4'>{wins}</td>
              <td class='px-6 py-4'>{losses}</td>
            </tr>
          );
        })
      }
    </tbody>
  </table>
</div>
